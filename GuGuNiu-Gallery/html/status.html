<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å’•å’•ç‰›çŠ¶æ€</title>
    <style>
        @font-face {
            font-family: 'CuteFont';
            src: local('Yuanti SC'), 
                 local('YouYuan'), 
                 local('Microsoft YaHei UI Rounded'), 
                 local('Arial Rounded MT Bold'),
                 local('Microsoft YaHei UI'),
                 local('PingFang SC'), 
                 sans-serif; 
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: 'CuteFont', sans-serif;
            width: 500px;
            margin: 10px auto;
            padding: 20px 25px;
            background: linear-gradient(to bottom, #e6f7ff 0%, #ffffff 85%);
            color: #444;
            font-size: 14px;
            line-height: 1.5;
            box-sizing: border-box; 
        }

        h1 {
            text-align: center;
            color: #0077cc;
            margin-top: 0;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #cceeff;
            font-size: 24px;
            font-weight: bold;
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 15px;
        }
        .stats-block {
            flex: 1;
            min-width: 0;
            background-color: rgba(255, 255, 255, 0.75);
            padding: 10px 12px;
            border-radius: 12px;
            border: 1px solid #d0e8ff;
            box-shadow: 0 2px 4px rgba(0, 119, 204, 0.05);
        }

        h2 {
            color: #4682b4;
            margin-top: 0;
            margin-bottom: 8px;
            border-left: 4px solid #4682b4;
            padding-left: 8px;
            font-size: 17px;
            font-weight: bold;
        }
        h2 .icon { margin-right: 5px; vertical-align: -3px; font-size: 17px; }

        ul { list-style: none; padding-left: 0px; margin-top: 5px; margin-bottom: 0; } 
        li {
            margin-bottom: 5px;
            padding-bottom: 3px;
            border-bottom: 1px solid #f0f4f8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 18px;
        }
        li:last-child { border-bottom: none; margin-bottom: 0; } 

        .label {
            color: #6a7a8a;
            margin-right: 8px;
            white-space: nowrap;
            font-size: 0.95em;
        }
        .value {
            font-weight: bold;
            color: #0056b3;
            text-align: right;
            font-size: 0.85em;
        }
        strong { color: #20c997; }

        .game-stats {
            margin-left: 8px;
            margin-top: 4px;
            padding-left: 8px;
            border-left: 2px solid #d1eaff;
        }
        .game-stats:empty { display: none; }
        .game-stats li {
            font-size: 0.9em;
            padding-bottom: 1px;
            margin-bottom: 1px;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            border-bottom: none;
        }
        .game-stats .label { min-width: 40px; flex-shrink: 0; margin-right: 5px; }
        .game-details { display: flex; justify-content: flex-start; align-items: center; flex-grow: 1;  flex-wrap: nowrap; }
        .game-details .value { text-align: left; margin-right: 0; min-width: 40px; white-space: nowrap; }
        .game-size { color: #777; font-weight: normal; }

        .storage-details-block {
            margin-top: 15px;
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 15px;
            background-color: #f5faff;
            border: 1px solid #c1d9ff;
            box-shadow: 0 2px 4px rgba(0, 119, 204, 0.05);
        }
        .storage-repo-columns {
            display: flex;
            justify-content: space-between; 
            gap: 15px;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        .storage-column {
            flex: 1; 
            min-width: 0; 
            position: relative;
        }
        .storage-column h3 {
            color: #6495ed;
            margin-top: 0;
            margin-bottom: 8px;
            font-size: 16px;
            font-weight: bold;
            border-bottom: 1px solid #d1eaff;
            padding-bottom: 4px;
            display: flex;
            align-items: center;
            white-space: nowrap;
        }
        .storage-column h3 .icon { margin-right: 5px; vertical-align: -2px; font-size: 16px; }
        .storage-column ul { margin-top: 4px; padding-left: 0; }
        .storage-column li { font-size: 0.9em; margin-bottom: 4px; padding-bottom: 2px; }
        .storage-column li:last-child { border-bottom: none; }
        .storage-column .label { color: #6a7a8a; }
        .storage-column .value { color: #0056b3; }
        .storage-column strong { color: #20c997; }
        .repo-not-exist { text-align: center; color: #aaa; font-size:0.9em; margin-top: 10px; } 

        .storage-summary-section {
           
        }
        .storage-summary-section h3 {
             color: #5f9ea0;
             margin-top: 0;
             margin-bottom: 8px;
             font-size: 17px;
             font-weight: bold;
             border-bottom: 1px solid #d1eaff;
             padding-bottom: 4px;
             display: flex;
             align-items: center;
        }
         .storage-summary-section h3 .icon { margin-right: 5px; vertical-align: -2px; font-size: 17px; }
         .storage-summary-section ul { margin-top: 4px; padding-left: 0; }
         .storage-summary-section li { font-size: 0.95em; }

        .config-section {
            margin-top: 15px;
            background-color: #fff8f0;
            padding: 12px 15px;
            border-radius: 12px;
            border: 1px solid #ffe0bd;
            box-shadow: 0 2px 4px rgba(255, 127, 80, 0.05);
        }
        .config-section h2 {
            color: #ff7f50;
            border-left-color: #ff7f50;
            font-size: 18px;
        }
        .config-section ul { margin-top: 8px; }
        .config-section li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95em;
        }
        .config-value-enabled { color: #2e7d32; font-weight: bold; }
        .config-value-disabled { color: #c62828; font-weight: bold; }


        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 0.75em;
            color: #a0b0c0;
            border-top: 1px solid #e0e8f0;
            padding-top: 8px;
        }

    </style>
</head>
<body style="{{scaleStyleValue}}">
    <div class="container">
        <h1>å’•å’•ç‰›çš„çŠ¶æ€æŠ¥å‘Š</h1>

        <div class="stats-row">
            <div class="stats-block">
                <h2><span class="icon">ğŸ“Š</span>å…ƒæ•°æ®ç»Ÿè®¡</h2>
                <ul>
                    <li><span class="label">è§’è‰²:</span> <span class="value"><strong>{{ stats.meta.roles || 0 }}</strong> å</span></li>
                    <li><span class="label">å›¾ç‰‡:</span> <span class="value"><strong>{{ stats.meta.images || 0 }}</strong> å¼ </span></li>
                    <ul class="game-stats">
                        {{ each stats.meta.games gameCount gameName }}
                        <li> <span class="label">{{ gameName }}:</span> <div class="game-details"> <span class="value">{{ gameCount }} å¼ </span> </div> </li>
                        {{ /each }}
                    </ul>
                </ul>
            </div>
            <div class="stats-block">
                <h2><span class="icon">ğŸ“</span>æœ¬åœ°æ–‡ä»¶æ‰«æ</h2>
                <ul>
                    <li><span class="label">è§’è‰²(æ‰«æ):</span> <span class="value"><strong>{{ stats.scan.roles || 0 }}</strong> å</span></li>
                    <li><span class="label">å›¾ç‰‡(æ‰«æ):</span> <span class="value"><strong>{{ stats.scan.images || 0 }}</strong> å¼ </span></li>
                    <ul class="game-stats">
                        {{ each stats.scan.gameImages gameCount gameName }}
                        <li> <span class="label">{{ gameName }}:</span> <div class="game-details"> <span class="value">{{ gameCount }} å¼ </span> <span class="value">{{ stats.scan.gameRoles[gameName] || 0 }} å</span> <span class="value game-size">{{ stats.scan.gameSizesFormatted[gameName] || '0 B' }}</span> </div> </li>
                        {{ /each }}
                    </ul>
                </ul>
            </div>
        </div>

        <div class="storage-details-block">
            <div class="storage-repo-columns">
                <div class="storage-column">
                    {{ if stats.repos['1'] }}
                        <h3><span class="icon">ğŸ“¦</span>{{ stats.repos['1'].name }}</h3>
                        {{ if stats.repos['1'].exists }}
                        <ul> <li><span class="label">æ–‡ä»¶:</span> <span class="value">{{ stats.repos['1'].filesSizeFormatted || 'N/A' }}</span></li> <li><span class="label">Git:</span> <span class="value">{{ stats.repos['1'].gitSizeFormatted || 'N/A' }}</span></li> <li><span class="label">å ç”¨:</span> <span class="value">{{ stats.repos['1'].sizeFormatted || 'N/A' }}</span></li> </ul>
                        {{ else }} <p class="repo-not-exist">(æœªä¸‹è½½)</p> {{ /if }}
                    {{ /if }}
                </div>
                <div class="storage-column">
                    {{ if stats.repos['2'] }}
                        <h3><span class="icon">ğŸ“¦</span>{{ stats.repos['2'].name }}</h3>
                        {{ if stats.repos['2'].exists }}
                        <ul> <li><span class="label">æ–‡ä»¶:</span> <span class="value">{{ stats.repos['2'].filesSizeFormatted || 'N/A' }}</span></li> <li><span class="label">Git:</span> <span class="value">{{ stats.repos['2'].gitSizeFormatted || 'N/A' }}</span></li> <li><span class="label">å ç”¨:</span> <span class="value">{{ stats.repos['2'].sizeFormatted || 'N/A' }}</span></li> </ul>
                        {{ else }} <p class="repo-not-exist">(æœªä¸‹è½½)</p> {{ /if }}
                    {{ /if }}
                </div>
                <div class="storage-column">
                    {{ if stats.repos['3'] }}
                        <h3><span class="icon">ğŸ“¦</span>{{ stats.repos['3'].name }}</h3>
                        {{ if stats.repos['3'].exists }}
                        <ul> <li><span class="label">æ–‡ä»¶:</span> <span class="value">{{ stats.repos['3'].filesSizeFormatted || 'N/A' }}</span></li> <li><span class="label">Git:</span> <span class="value">{{ stats.repos['3'].gitSizeFormatted || 'N/A' }}</span></li> <li><span class="label">å ç”¨:</span> <span class="value">{{ stats.repos['3'].sizeFormatted || 'N/A' }}</span></li> </ul>
                        {{ else }} <p class="repo-not-exist">(æœªä¸‹è½½)</p> {{ /if }}
                    {{ else }}
                         <h3><span class="icon">ğŸ“¦</span>ä¸‰å·ä»“åº“</h3> <p class="repo-not-exist">(æœªé…ç½®)</p>
                    {{ /if }}
                </div>
            </div>
            <div class="storage-summary-section">
                 <h3><span class="icon">ğŸ’¾</span>å­˜å‚¨æ€»è§ˆ</h3>
                 <ul>
                     <li><span class="label">æ€»æ–‡ä»¶:</span> <span class="value"><strong>{{ stats.scan.totalFilesSizeFormatted || '0 B' }}</strong></span></li>
                     <li><span class="label">Gitç¼“å­˜:</span> <span class="value"><strong>{{ stats.scan.totalGitSizeFormatted || '0 B' }}</strong></span></li>
                     <li><span class="label">æ€»å ç”¨:</span> <span class="value"><strong>{{ stats.scan.totalSizeFormatted || '0 B' }}</strong></span></li>
                 </ul>
            </div>
        </div>

        <div class="config-section">
            <h2><span class="icon">âš™ï¸</span>é…ç½®çŠ¶æ€</h2>
            <ul>
                <li><span class="label">å¯ç”¨çŠ¶æ€:</span> <span class="value {{ config.enabled ? 'config-value-enabled' : 'config-value-disabled' }}">{{ config.enabledText }}</span></li>
                <li><span class="label">å‡€åŒ–ç­‰çº§:</span> <span class="value">{{ config.pflLevel }} ({{ config.pflDesc }})</span></li>
                <li><span class="label">ç”Ÿæ•ˆå±è”½:</span> <span class="value"><strong>{{ config.activeBans || 0 }}</strong> å¼  (æ‰‹åŠ¨ {{ config.userBans || 0 }} + å‡€åŒ– {{ config.purifiedBans || 0 }})</span></li>
                <li><span class="label">Ai å›¾çŠ¶æ€:</span> <span class="value {{ config.aiEnabled ? 'config-value-enabled' : 'config-value-disabled' }}">{{ config.aiStatusText }}</span></li>
                <li><span class="label">å½©è›‹å›¾çŠ¶æ€:</span> <span class="value {{ config.easterEggEnabled ? 'config-value-enabled' : 'config-value-disabled' }}">{{ config.easterEggStatusText }}</span></li>
                <li><span class="label">æ¨ªå±å›¾çŠ¶æ€:</span> <span class="value {{ config.layoutEnabled ? 'config-value-enabled' : 'config-value-disabled' }}">{{ config.layoutStatusText }}</span></li>
                <li><span class="label">PM18 åŠŸèƒ½:</span> <span class="value {{ config.pm18Enabled ? 'config-value-enabled' : 'config-value-disabled' }}">{{ config.pm18StatusText }}</span></li>
            </ul>
        </div>

        <div class="footer">Miao-Plugin-MBT v{{ pluginVersion }} | By å’•å’•ç‰›</div>
    </div>
</body>
</html>